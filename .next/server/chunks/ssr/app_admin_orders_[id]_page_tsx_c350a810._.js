module.exports=[55986,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(38246),f=a.i(71987),g=a.i(72160),h=a.i(38679),i=a.i(7294),j=a.i(783),k=a.i(60157),l=a.i(65482),m=a.i(57834),n=a.i(56711),o=a.i(210),p=a.i(83497),q=a.i(24987),r=a.i(11156),s=a.i(41675),t=a.i(4334);let u=(0,a.i(70106).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var v=a.i(46842),w=a.i(92258),x=a.i(63519);let y=["PENDING","CONFIRMED","PROCESSING","SHIPPED","OUT_FOR_DELIVERY","DELIVERED","CANCELLED","RETURNED","REFUNDED"],z=["PENDING","PAID","FAILED","REFUNDED","PARTIALLY_REFUNDED"];function A(){let a=(0,d.useParams)();(0,d.useRouter)();let A=a.id,[B,C]=(0,c.useState)(!1),[D,E]=(0,c.useState)(null),[F,G]=(0,c.useState)(!0),[H,I]=(0,c.useState)(null),[J,K]=(0,c.useState)(!1),[L,M]=(0,c.useState)({status:"",trackingNumber:"",carrierName:""}),[N,O]=(0,c.useState)({paymentStatus:"",paymentId:""});(0,c.useEffect)(()=>{let a=async()=>{try{G(!0);let a=await (0,m.getOrderById)(A);E(a.data),M({status:a.data.status,trackingNumber:a.data.trackingNumber||"",carrierName:a.data.carrierName||""}),O({paymentStatus:a.data.paymentStatus,paymentId:a.data.paymentId||""})}catch(a){I(a.message||"Failed to load order")}finally{G(!1)}};A&&a()},[A]);let P=async a=>{a.preventDefault();try{K(!0),await (0,m.updateOrderStatus)(A,L.status,L.trackingNumber,L.carrierName);let a=await (0,m.getOrderById)(A);E(a.data),alert("Order status updated successfully")}catch(a){alert(a.message||"Failed to update order status")}finally{K(!1)}},Q=async a=>{a.preventDefault();try{K(!0),await (0,m.updatePaymentStatus)(A,N.paymentStatus,N.paymentId);let a=await (0,m.getOrderById)(A);E(a.data),O({paymentStatus:a.data.paymentStatus,paymentId:a.data.paymentId||""}),alert("Payment status updated successfully")}catch(a){alert(a.message||"Failed to update payment status")}finally{K(!1)}},R=a=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(a),S=()=>{C(!B)},T=()=>{C(!1)};if(F)return(0,b.jsxs)("div",{className:"min-h-screen w-screen overflow-x-hidden bg-gray-50",children:[(0,b.jsx)(g.default,{}),(0,b.jsx)(h.default,{onMenuToggle:S,isMenuOpen:B}),(0,b.jsx)(i.default,{isMobileMenuOpen:B,onCloseMobileMenu:T}),(0,b.jsx)("div",{className:"flex items-center justify-center py-20",children:(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}),(0,b.jsx)(j.default,{})]});if(H||!D)return(0,b.jsxs)("div",{className:"min-h-screen w-screen overflow-x-hidden bg-gray-50",children:[(0,b.jsx)(g.default,{}),(0,b.jsx)(h.default,{onMenuToggle:S,isMenuOpen:B}),(0,b.jsx)(i.default,{isMobileMenuOpen:B,onCloseMobileMenu:T}),(0,b.jsx)("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:(0,b.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[(0,b.jsx)("p",{className:"text-red-800",children:H||"Order not found"}),(0,b.jsx)(e.default,{href:"/admin/orders",className:"mt-4 inline-block px-4 py-2 bg-primary text-white rounded-md hover:bg-primary-dark",children:"Back to Orders"})]})}),(0,b.jsx)(j.default,{})]});let U=D.shippingAddress||{},V=D.user||{};return(0,b.jsxs)("div",{className:"min-h-screen w-screen overflow-x-hidden bg-gray-50",children:[(0,b.jsx)(g.default,{}),(0,b.jsx)(h.default,{onMenuToggle:S,isMenuOpen:B}),(0,b.jsx)(i.default,{isMobileMenuOpen:B,onCloseMobileMenu:T}),(0,b.jsxs)("main",{className:"container mx-auto px-4 py-8 max-w-7xl",children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsxs)(e.default,{href:"/admin/orders",className:"inline-flex items-center gap-2 text-primary hover:text-primary-dark mb-4",children:[(0,b.jsx)(o.ArrowLeft,{className:"h-4 w-4"}),"Back to Orders"]}),(0,b.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:["Order #",D.orderNumber]}),(0,b.jsxs)("p",{className:"text-gray-600",children:["Placed on ",(0,n.format)(new Date(D.createdAt),"MMMM dd, yyyy")]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsx)(k.default,{status:D.status,size:"lg"}),(0,b.jsx)(l.default,{status:D.paymentStatus,size:"lg"})]})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,b.jsxs)("div",{className:"lg:col-span-2 space-y-6",children:[(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,b.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,b.jsx)(v.User,{className:"h-5 w-5"}),"Customer Information"]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Name"}),(0,b.jsxs)("p",{className:"font-medium text-gray-900",children:[V.firstName," ",V.lastName]})]}),(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"text-sm text-gray-600 mb-1 flex items-center gap-1",children:[(0,b.jsx)(w.Mail,{className:"h-4 w-4"}),"Email"]}),(0,b.jsx)("p",{className:"font-medium text-gray-900",children:V.email})]}),V.phone&&(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"text-sm text-gray-600 mb-1 flex items-center gap-1",children:[(0,b.jsx)(x.Phone,{className:"h-4 w-4"}),"Phone"]}),(0,b.jsx)("p",{className:"font-medium text-gray-900",children:V.phone})]})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Order Items"}),(0,b.jsx)("div",{className:"overflow-x-auto",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{children:(0,b.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,b.jsx)("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Product"}),(0,b.jsx)("th",{className:"text-left py-3 px-4 text-sm font-semibold text-gray-700",children:"Variant"}),(0,b.jsx)("th",{className:"text-center py-3 px-4 text-sm font-semibold text-gray-700",children:"Quantity"}),(0,b.jsx)("th",{className:"text-right py-3 px-4 text-sm font-semibold text-gray-700",children:"Unit Price"}),(0,b.jsx)("th",{className:"text-right py-3 px-4 text-sm font-semibold text-gray-700",children:"Total"})]})}),(0,b.jsx)("tbody",{children:D.items?.map(a=>(0,b.jsxs)("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[(0,b.jsx)("td",{className:"py-4 px-4",children:(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[a.productImage?(0,b.jsx)("div",{className:"relative w-16 h-16 rounded-md overflow-hidden border border-gray-200 flex-shrink-0",children:(0,b.jsx)(f.default,{src:a.productImage,alt:a.productName,fill:!0,className:"object-cover"})}):(0,b.jsx)("div",{className:"w-16 h-16 rounded-md bg-gray-100 flex items-center justify-center border border-gray-200 flex-shrink-0",children:(0,b.jsx)(p.Package,{className:"h-6 w-6 text-gray-400"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h3",{className:"font-medium text-gray-900",children:a.productName}),a.productSku&&(0,b.jsxs)("p",{className:"text-xs text-gray-500",children:["SKU: ",a.productSku]})]})]})}),(0,b.jsx)("td",{className:"py-4 px-4",children:(0,b.jsx)("p",{className:"text-sm text-gray-600",children:a.variantName||"Standard"})}),(0,b.jsx)("td",{className:"py-4 px-4 text-center",children:(0,b.jsx)("span",{className:"inline-flex items-center justify-center w-10 h-10 bg-primary/10 text-primary font-semibold rounded-md",children:a.quantity})}),(0,b.jsx)("td",{className:"py-4 px-4 text-right",children:(0,b.jsx)("p",{className:"text-sm font-medium text-gray-900",children:R(Number(a.unitPrice))})}),(0,b.jsx)("td",{className:"py-4 px-4 text-right",children:(0,b.jsx)("p",{className:"text-sm font-semibold text-gray-900",children:R(Number(a.totalPrice))})})]},a.id))}),(0,b.jsx)("tfoot",{children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("td",{colSpan:4,className:"py-4 px-4 text-right font-semibold text-gray-900",children:"Total Items:"}),(0,b.jsx)("td",{className:"py-4 px-4 text-right font-bold text-gray-900",children:D.items?.reduce((a,b)=>a+b.quantity,0)||0})]})})]})})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,b.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,b.jsx)(q.MapPin,{className:"h-5 w-5"}),"Shipping Address"]}),(0,b.jsxs)("div",{className:"text-gray-600 space-y-1",children:[(0,b.jsx)("p",{className:"font-medium text-gray-900",children:U.fullName}),(0,b.jsx)("p",{children:U.addressLine1}),U.addressLine2&&(0,b.jsx)("p",{children:U.addressLine2}),(0,b.jsxs)("p",{children:[U.city,", ",U.state," ",U.pincode]}),(0,b.jsx)("p",{children:U.country||"India"}),U.phone&&(0,b.jsxs)("p",{className:"mt-2",children:["Phone: ",U.phone]})]})]})]}),(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Update Order Status"}),(0,b.jsxs)("form",{onSubmit:P,className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order Status"}),(0,b.jsx)("select",{value:L.status,onChange:a=>M({...L,status:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary",required:!0,children:y.map(a=>(0,b.jsx)("option",{value:a,children:a},a))})]}),"SHIPPED"===L.status&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tracking Number"}),(0,b.jsx)("input",{type:"text",value:L.trackingNumber,onChange:a=>M({...L,trackingNumber:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary",placeholder:"Enter tracking number"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Carrier Name"}),(0,b.jsx)("input",{type:"text",value:L.carrierName,onChange:a=>M({...L,carrierName:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary",placeholder:"e.g., FedEx, DHL"})]})]}),(0,b.jsxs)("button",{type:"submit",disabled:J,className:"w-full px-4 py-2 bg-primary text-white rounded-md hover:bg-primary-dark disabled:opacity-50 flex items-center justify-center gap-2",children:[(0,b.jsx)(u,{className:"h-4 w-4"}),J?"Saving...":"Update Status"]})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Update Payment Status"}),(0,b.jsxs)("form",{onSubmit:Q,className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Status"}),(0,b.jsx)("select",{value:N.paymentStatus,onChange:a=>O({...N,paymentStatus:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary",required:!0,children:z.map(a=>(0,b.jsx)("option",{value:a,children:a},a))})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment ID (Optional)"}),(0,b.jsx)("input",{type:"text",value:N.paymentId,onChange:a=>O({...N,paymentId:a.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary",placeholder:"Payment gateway transaction ID"})]}),(0,b.jsxs)("button",{type:"submit",disabled:J,className:"w-full px-4 py-2 bg-primary text-white rounded-md hover:bg-primary-dark disabled:opacity-50 flex items-center justify-center gap-2",children:[(0,b.jsx)(u,{className:"h-4 w-4"}),J?"Saving...":"Update Payment"]})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Order Summary"}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex justify-between text-gray-600",children:[(0,b.jsx)("span",{children:"Subtotal"}),(0,b.jsx)("span",{children:R(Number(D.subtotal))})]}),D.discountAmount>0&&(0,b.jsxs)("div",{className:"flex justify-between text-green-600",children:[(0,b.jsx)("span",{children:"Discount"}),(0,b.jsxs)("span",{children:["-",R(Number(D.discountAmount))]})]}),(0,b.jsxs)("div",{className:"flex justify-between text-gray-600",children:[(0,b.jsx)("span",{children:"Tax (GST)"}),(0,b.jsx)("span",{children:R(Number(D.taxAmount))})]}),(0,b.jsxs)("div",{className:"flex justify-between text-gray-600",children:[(0,b.jsx)("span",{children:"Shipping"}),(0,b.jsx)("span",{children:D.shippingAmount>0?R(Number(D.shippingAmount)):"Free"})]}),(0,b.jsxs)("div",{className:"border-t border-gray-200 pt-3 flex justify-between text-lg font-bold text-gray-900",children:[(0,b.jsx)("span",{children:"Total"}),(0,b.jsxs)("span",{className:"flex items-center gap-1",children:[(0,b.jsx)(t.IndianRupee,{className:"h-5 w-5"}),R(Number(D.totalAmount))]})]})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,b.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,b.jsx)(r.CreditCard,{className:"h-5 w-5"}),"Payment Information"]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Payment Method"}),(0,b.jsx)("p",{className:"font-medium text-gray-900",children:D.paymentMethod})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Payment Status"}),(0,b.jsx)(l.default,{status:D.paymentStatus,size:"sm"})]}),D.paidAt&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"Paid on"}),(0,b.jsx)("p",{className:"text-sm text-gray-900",children:(0,n.format)(new Date(D.paidAt),"MMMM dd, yyyy")})]})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[(0,b.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[(0,b.jsx)(s.Calendar,{className:"h-5 w-5"}),"Order Timeline"]}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Order Placed"}),(0,b.jsx)("p",{className:"text-xs text-gray-600",children:(0,n.format)(new Date(D.createdAt),"MMM dd, yyyy HH:mm")})]}),D.shippedAt&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Shipped"}),(0,b.jsx)("p",{className:"text-xs text-gray-600",children:(0,n.format)(new Date(D.shippedAt),"MMM dd, yyyy HH:mm")})]}),D.deliveredAt&&(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"Delivered"}),(0,b.jsx)("p",{className:"text-xs text-gray-600",children:(0,n.format)(new Date(D.deliveredAt),"MMM dd, yyyy HH:mm")})]})]})]})]})]})]}),(0,b.jsx)(j.default,{})]})}a.s(["default",()=>A],55986)}];

//# sourceMappingURL=app_admin_orders_%5Bid%5D_page_tsx_c350a810._.js.map